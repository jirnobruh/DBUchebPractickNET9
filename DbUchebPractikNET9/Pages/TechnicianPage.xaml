<Page x:Class="DbUchebPractikNET9.Pages.TechnicianPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Background="#FFF2F2F2">

    <Grid Margin="20">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="2*"/>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
        
        <!-- Кнопка выхода -->
        <Button Content="Выйти"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                Margin="0 0 10 10"
                Width="100"
                Height="35"
                Click="Logout_Click"/>

        <!-- Заголовок -->
        <TextBlock Text="Техническое обслуживание"
                   FontSize="28"
                   FontWeight="Bold"
                   Margin="0 40 0 20"/>


    <!-- Таблица техники -->
    <DataGrid x:Name="TechnicGrid"
              Grid.Row="1"
              AutoGenerateColumns="False"
              IsReadOnly="True"
              SelectionMode="Single"
              Margin="0 10 0 10"
              SelectionChanged="TechnicGrid_SelectionChanged">

        <DataGrid.Columns>
            <DataGridTextColumn Header="ID" Binding="{Binding TechnicID}" Width="60"/>
            <DataGridTextColumn Header="Название" Binding="{Binding Title}" Width="*"/>
            <DataGridTextColumn Header="Категория" Binding="{Binding Category.CategoryTitle}" Width="150"/>
            <DataGridTextColumn Header="Статус" Binding="{Binding Status.StatusTitle}" Width="150"/>
        </DataGrid.Columns>

    </DataGrid>

    <!-- Кнопки -->
    <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0 10 0 10">
        <Button Content="Добавить ТО"
                Width="150"
                Height="35"
                Margin="0 0 10 0"
                Click="AddService_Click"/>

        <Button Content="Изменить статус"
                Width="150"
                Height="35"
                Click="ChangeStatus_Click"/>
    </StackPanel>

    <!-- История ТО -->
    <GroupBox Header="История ТО выбранной техники"
              Grid.Row="3"
              Margin="0 10 0 0"
              FontSize="16">

        <DataGrid x:Name="ServiceHistoryGrid"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  Margin="5">

            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding TechnicalServiceID}" Width="60"/>
                <DataGridTextColumn Header="Дата" Binding="{Binding TsDate}" Width="150"/>
                <DataGridTextColumn Header="Описание" Binding="{Binding Description}" Width="*"/>
                <DataGridTextColumn Header="Выполнил" Binding="{Binding PerformedUser.FirstName}" Width="150"/>
            </DataGrid.Columns>

        </DataGrid>

    </GroupBox>

</Grid>
</Page>